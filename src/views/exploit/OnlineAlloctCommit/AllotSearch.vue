<template>
  <div class="MySearch">
    <a-form layout="inline" :model="formState">
      <a-form-item label="报表名称">
        <a-input v-model:value="formState.name" placeholder="请输入表名" />
      </a-form-item>
      <a-form-item label="报表编码">
        <a-input v-model:value="formState.orderCode" placeholder="请输入表描述" />
      </a-form-item>
      <a-form-item>
        <a-button type="primary" :icon="h(SearchOutlined)" @click='allotQuery'>查询</a-button>
      </a-form-item>
      <a-form-item>
        <a-button :icon="h(SyncOutlined)" @click="resEnd">重置</a-button>
      </a-form-item>
    </a-form>
  </div>
</template>

<script setup lang='ts'>
import { reactive, h, defineEmits } from 'vue'
import { SearchOutlined, SyncOutlined } from '@ant-design/icons-vue'
import { allocationQuery } from '../../../api/allocation'
const formState: any = reactive({
  name: '',
  orderCode: ''
})
//重置输入
const resEnd = () => {
  formState.name = ''
  formState.orderCode = ''
}

const emit = defineEmits(['allotQuery'])
const allotQuery = async () => {
  const { result } = await allocationQuery({
    name: formState.name,
    code: formState.orderCode
  })
  console.log(result)
  // 发送给父组件的数据
  emit('allotQuery', result)
}
</script>

<style lang='less' scoped ></style>
